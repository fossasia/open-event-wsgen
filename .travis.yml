language: node_js
node_js:
- 8.11.1
sudo: required
services:
- redis-server
- docker
env:
- TESTFOLDER=test/serverTest.js CXX=g++-4.8 PATH=$PATH:${HOME}/google-cloud-sdk/bin
  CLOUDSDK_CORE_DISABLE_PROMPTS=1
- TESTFOLDER=test/roomsAndSpeakers.js
- TESTFOLDER=test/tracks.js
- TESTFOLDER=test/generatorAndSchedule.js
- TESTFOLDER=test/sessionEventAndCoC.js
addons:
  sauce_connect:
    username: princu7
  jwt:
    secure: FslueGK2gtPHkRANMpUlGyCGsr1jTVuaKpP+SvYUxBYh5zbz73GMq+VsqlE29IZ1ER1+xMfWuCCvg3VA7HePyN6hzoZ/t0LADureYVPur6R5ZJgqgQpBinjpytIjo2BhN3NqaNWaIJZTLDSAT76R7HuNm016jbuOEjO5foYWuz2F82B03viHmk42CRNl3eqXEMcwkkLfEkvu9iupeVAArPXepA2YCpaaFbV2D5ahTelzMROnc2YQ/HyAdaaLtto8L0CDmZSrFsPZtTGQKarFdOgKWeor2iD1AiYLHYdcbvXV5YbBVvi7tFJG8r5h0YBUu1JIkhvzWIi698GJRGwDCONStCaKVhrMvpL7C8fEpbzullxFSpWOVupTEjn+u0OGaxrugwSZ1dtSkbIu+2SlVR/QuXS8o6OMiDz7lrFhIc+hF6EvFRWI7UIjt9NPte1o3COA8WESaseCWKhLY0g/hgpRSM7pyfKx2NAj4UCXyPATTKRJNlEHcs/jMpgxu+RSjPYphK4rrWxm6O6bJxd+jNwQNBOmJ1lQgOPAxpA7SvRDpN5Et+L61tWttR1EEO1+sj0g/iGO+zrZfD8m+jxNnIGWih/ykSzggiaJ42VFbQcJFk5BCfxlty6c0p8DvJkdulcRkboU21nQx9irqWmSeedcA3VJX2r0womx3tZYnbY=
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
  code_climate:
    repo_token: 46f6d31d6b0777711b6c7e733234b023bda56e2e02c792c68c889005cf032ea6
install:
- npm install -g istanbul mocha@3
- npm install
- npm install --save-dev
script: 
- echo "npm test temporarily disabled"
# - istanbul cover _mocha -- $TESTFOLDER
after_success: if ([ "$TESTFOLDER" == "test/serverTest.js" ]); then bash <(curl -s
  https://codecov.io/bash); bash gh_deploy.sh && kubernetes/travis/deploy.sh; fi
before_install:
- sudo apt-get update
- sudo -E apt-get -yq install g++-4.8
deploy:
  provider: heroku
  api_key:
    secure: eRg5DSPXMhtU72ifCKLmMKmHIs8zdVugk366stUqw6+9qyZttMUDuHqyJ8LgqrbLVe5gcXKZ9BOACV3TvYuvUTMIesvF1Pr15AqOfcFwOhcXmhL9bAaGFCZ25/HQRawR02/yAM78Rsd3rgZFqaiJT0a3ChwafwAXCTZ9B69g56WeIfGvsMFpCp3iB5fnx5/Xnpd3vSI7DQuUlV6f+8gPXLQUEHcniJXfvC/skrPln1BQFY6SrTHglqXbjEGq9/UWf4vMqXgsVKWOvgQq6zlsKXxWY8dNGmqdEl9sgWebI9nF2pi8LBY0aLDFKAAICyrT81kIys7J8X4LdzQCTZm+qZKBaojtl/hLN/WVkAQUfdkouKVUUrE/lh1uzbynV4uYoCm+GXfeqsAbKXcBes5oVKkDwSvaJpn3+pxwGPGclzFCOdWsRM345XmP/Qm857hi3h+TMLdcR56KN/ygqQAkTiO5rJVcWqR8rKLdDl6qNNtYIiZjn5DyOPcuSyKQuB9MwipUx8nZcSswVeV/Kdhg/OWeL4rViaPSmC46fppu3dsFNsOYPyI4xXDk4rE9jGGsHI6gGat5HM9HEUIkicNttD1EWw61/jYtYpBSAVuBA+xjCIBMwpFrA+0qS9gNK7e5TcROngxqTm659cxFXELhRWVERMx+7KiDfxSaV1nwgdA=
  app: open-event-gci
  on:
    repo: pranavkarthik10/open-event-wsgen
    branch:
    - master
    - development
    node: 8.11.1
    condition: "$TESTFOLDER = test/serverTest.js"
