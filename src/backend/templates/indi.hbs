<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="preload" as="script" href="../js/jquery.min.js">
    <link rel="preload" as="script" href="../js/bootstrap.min.js">
    <link rel="preload" as="script" href="../js/tracks.min.js">
    <link rel="preload" as="style" href="../css/schedule.css">
    <link rel="preload" as="style" href="../css/font-awesome.min.css">
    <link rel="preload" as="style" href="../css/bootstrap.min.css">
    <link rel="preload" as="font" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" crossorigin>


    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <meta name="description" content="{{ apptitle }} Schedule">
    <meta name="author" content="{{ metaauthor }}">

    <title>{{ apptitle }}</title>

    <!-- Bootstrap core CSS -->
    <!-- Latest compiled and minified CSS -->
    <link rel="shortcut icon" href="{{ eventurls.ico_url }}" type="image/x-icon"/>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/schedule.css">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>
  <body>
    <a href="#track-list" class="skip">Skip to content</a>
    {{> scroll}}
    <a id="top"></a>
    {{> navbar}}
    {{#session}}
      <div class="container" style="margin-top:2%; background-color:white; text-align:center;">
        <div class="row singleSession" id="{{session_id}}" style="margin-top:100px">
          <h3> {{startDate}} </h3>
          <div class = "eventtime"><span class="time-track">{{start}} - {{end}}</span></div>
          <div class="left-border" style="width:75%; margin:auto; border:0px">
            <div class="sizeevent event" id="event-title" style="background-color: {{color}}; color:{{font_color}};margin-right:0px;cursor: unset;">
              {{title}} {{#if type}} ({{type}}) {{/if}} | {{track_title}}
              <a class="bookmark">
                <i class="fa fa-star" aria-hidden="true">
                </i>
              </a>
            </div>
            <div>
              <div>
                {{{description}}}
                {{#if audio}}
                  <audio controls="" id="audio-block" preload="none">
                    <source src="{{ audio }}">
                  </audio>
                {{/if}}
              </div>
              <hr class="clear-both">
              <div class="session-speakers-list" aria-expanded="false"
                aria-controls="desc-{{session_id}}">
                {{#speakers_list}}
                  <a href="../speakers.html#{{nameIdSlug}}">
                    <div class="session-speakers-less">
                      <p class="session-speakers">
                        {{#if photo}}
                          <img onError="this.onerror=null;this.src='./images/avatar.png';"
                          src="{{thumb}}" class="lazy card-img-top speaker-image-large"/>
                        {{else}}
                          <img class="card-img-top speaker-image-large" src="./images/avatar.png"/>
                        {{/if}}
                      </p>
                      <span class="graytext">{{name}}</span>
                    </div>
                  </a>
                  {{#if organisation}}
                    <p class="session-speakers-more">{{organisation}}</p>
                  {{/if}}
                  {{#if biography}}
                    <div class="session-speakers-more">
                      {{{biography}}}
                    </div>
                  {{/if}}
                  <div class="blacktext session-speaker-social">
                    <div class="session-speakers-more">
                      {{#if web}}
                        <a class="blacktext social speaker-social" href="{{{web}}}"><i
                            class="fa fa-home"></i> Web</a>&nbsp;
                      {{/if}}
                      {{#if github}}
                        <a class="blacktext social speaker-social" href="{{{github}}}"><i
                            class="fa fa-github"></i> Github</a>&nbsp;
                      {{/if}}
                      {{#if twitter}}
                        <a class="blacktext social speaker-social" href="{{{twitter}}}"><i
                            class="fa fa-twitter"></i> Twitter</a>&nbsp;
                      {{/if}}
                      {{#if linkedin}}
                        <a class="blacktext social speaker-social" href="{{{linkedin}}}"><i
                            class="fa fa-linkedin"></i> LinkedIn</a>&nbsp;
                      {{/if}}
                      <a class="session-lin social speaker-social clickable-link">
                        <i class="fa fa-share"></i> Share
                      </a>&nbsp;
                      <div class="social-buttons row">
                        {{> social}}
                        <div class="row social-link">
                          <input class="speakers-inputbox" type="text" onclick="this.select()"
                          value="base#{{../session_id}}" readonly>
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr class="clear-both">
                {{/speakers_list}}
                <div class="blacktext">
                  {{#if location}}<p><i>{{location}}</i></p>{{/if}}
                  {{#if startDate}}<p>{{startDate}}, <span>{{start}} - {{end}}</span></p>{{/if}}
                  <p>
                    <ul class="title-inline">
                      <li style="background-color:{{{color}}};color:{{{font_color}}};"
                        class="titlecolor"></li>
                      &nbsp;
                      <li class="blacktext" style="max-width:100%; margin-left:1%;">{{track_title}}</li>
                    </ul>
                  </p><br>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    {{/session}}
    {{> footer}}
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.min.js" type="text/javascript"></script>
    <script type="text/javascript">
      var flag = 0;
      $(document).ready(function() {
        $('.bookmark').click(function () {
          console.log("Clicked");
          flag = 1;
          var isAdded = 0;
          var curColor = $(this).css("color");
          if (curColor == "rgb(0, 0, 0)") {
            $(this).css("color", "");
            isAdded = 0;
          }
          else {
            $(this).css("color", "black");
            isAdded = 1;
          }
        });
        $('.singleSession').click(function () {
          console.log("I am being clicked");
          var temp = JSON.parse(localStorage['sessions']);
          var id =  Number($(this).attr('id'));;
          if (flag) {
            if (isAdded) {
              temp[id] = 1;
            }
            else {
              temp[id] = 0;
              if (mode) {
                $(this).hide();
              }
            }
            flag = isAdded = 0;
            localStorage['sessions'] = JSON.stringify(temp);
          }
        });
        var sideslider = $('[data-toggle=collapse-side]');
        var sel = sideslider.attr('data-target');
        var top = $('header[role=banner]').outerHeight();
        sideslider.click(function(event){
          $(sel).css('top', top);
          $(sel).toggleClass('in');
        });
        $('#down-button').hide();
        $('#down-button').click(function() {
          $('html, body').animate({scrollTop: 0}, 500);
          $('#down-button').fadeOut(500);
        });

        window.addEventListener('scroll', function() {
          if($(window).scrollTop() > 0) {
            $('#down-button').fadeIn(500);
          }
          if($(window).scrollTop() === 0) {
            $('#down-button').fadeOut(500);
          }
        });

        $('.session-lin').click(function (e) {
          e.stopPropagation();
        });

        $('.session-lin').click(function () {
          $(this).parent().parent().find("div.social-buttons").toggle();
          var val = $(this).parent().parent().find('.speakers-inputbox').val();
          $(this).parent().parent().find('.speakers-inputbox').val(window.location.href.split('#')[0] + '#' + val.split('#').pop());
        });
      });
    </script>
  </body>
</html>
