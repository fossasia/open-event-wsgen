
<!DOCTYPE html>
<!--
  Note to contributors: Do not submit any changes to this page, as it is generated automatically
  from https://github.com/fossasia/open-event-scraper.
-->
<html lang="en">
<head>
  {{> googleanalytics}}

  <link rel="preload" as="script" href="./js/jquery.min.js">
  <link rel="preload" as="script" href="./js/bootstrap.min.js">
  <link rel="preload" as="script" href="./js/schedule.min.js">
  <link rel="preload" as="style" href="./css/schedule.css">
  <link rel="preload" as="style" href="./css/font-awesome.min.css">
  <link rel="preload" as="style" href="./css/bootstrap.min.css">
  <link rel="preload" as="font" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" crossorigin>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

  <meta name="description" content="{{ apptitle }} Schedule">
  <meta name="author" content="{{ metaauthor }}">

  <title>{{ apptitle }}</title>

  <!-- Bootstrap core CSS -->
  <!-- Latest compiled and minified CSS -->
  <link rel="shortcut icon" href="{{ eventurls.ico_url }}" type="image/x-icon" />
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="./css/font-awesome.min.css">
  <link rel="stylesheet" href="./css/bootstrap.min.css">
  <link rel="stylesheet" href="./css/schedule.css">

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.3/jspdf.min.js"></script>
</head>

<body>
  <a href="#schedule-list" class="skip">Skip to content</a>
  {{> scroll}}
  <a id="top"></a>
  {{> navbar}}
  <div class="main container" id="session-list">
    <div class="row" id="schedule-list">
      <div class="middle col-sm-12">
        <h2 class="filter-heading track-heading text-center">
        <span>
          Schedule
        </span>
        </h2>
      </div>
    </div>
    <!-- --------------------------------------------------------------
        search-filter, search-filter-speaker and fossasia-filter
        These classes are designed for search tab.

        day-filter and time-filter classes are intended for searching
        text across the page.
        --------------------------------------------------------------- -->
    <div class="date-list container">
      <div id="tabs" class="col-md-6 col-xs-12 col-sm-12 tabs no-js">
         <span class="tabs-nav">
            {{#timeList}}
            <a id="{{slug}}" href="#" class="{{slug}} date-button tabs-nav-link">{{date}}</a>
            {{/timeList}}
         </span>
      </div>
      <div class="col-md-6 col-sm-12 col-xs-12 navbar-flex" >
        <span class="filter">
          <button id = "page-mode" class="btn btn-default" type="button"><i class="fa fa-calendar" aria-hidden="true"></i></button>
        </span>
        <span class="dropdown filter">
          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"><i class="fa fa-download" aria-hidden="true"></i><span class="caret"></span> </button>
          <ul class="dropdown-menu list-menu download-dropdown">
            <li> <a href="#" class="export-png"> Download as png </a> </li>
            <li> <a href="#" class="export-schedule"> Download as ics </a> </li>
            <li> <a href="#" class="export-pdf"> Download as pdf </a> </li>
          </ul>
        </span>
        <span class="search-filter search-filter-schedule">
         <label for="search-input"><i class="fa fa-search" aria-hidden="true"></i></label>
         <input class="fossasia-filter" type="text" placeholder="Search">
        </span>
        <span class = "show-button-filter">
            <button class = "btn btn-default" id = "starred" ><i class="fa fa-star" aria-hidden="true"></i></button>
        </span>
      </div>
    </div>

    <div class="container track-filter-info">
      Track: <span id="TrackCurFilter" style="font-weight:bold;"> </span> <a href="#" id="TrackClearFilter">  [Clear Filter]</a>
    </div>

    <div class="container room-filter-info">
      Room: <span id="RoomCurFilter" style="font-weight:bold;"> </span> <a href="#" id="RoomClearFilter">  [Clear Filter]</a>
    </div>

    <div class="row">
      <div class="col-md-9 list-view">
        <div id="track-list" class="container">

          {{#timeList}}
           <div class="{{slug}} day-filter">
            <div class="col-md-12 paddingzero">
              <h4 class="text">{{date}}</h4>
            </div>
            {{#times}}
            <div class="time-filter">
            <div class="row">
              <div class="eventtime col-xs-2 col-sm-2 col-md-2">
                <span>{{caption}}</span>
              </div>

              <div class="tracks col-xs-10 col-sm-10 col-md-10">
                {{#sessions}}
                <div class="schedule-track" id="{{session_id}}" onclick = "loadVideoAndSlides('{{session_id}}', '{{video}}', '{{slides}}')">
                  <a class="anchor" id="s-{{session_id}}"></a>
                  <div class="schedule-container">
                    <div class="padding-right-zero">
                      {{#if ../../../mode}}
                        <h4 style="background-color:{{{color}}}; color: {{{font_color}}};"
                          class="schedule-margin sizeevent event"  id="title-{{session_id}} "data-toggle="collapse">
                      {{else}}
                        <h4 style="background-color:{{{color}}}; color: {{{font_color}}};"
                          class="schedule-margin sizeevent event" id="title-{{session_id}}" data-toggle="collapse"
                          data-target="#desc-{{session_id}}"
                          aria-expanded="false"
                          aria-controls="desc-{{session_id}}">
                      {{/if}}
                        <div class = "features">
                          {{#if audio}}
                            <i class="fa fa-music" aria-hidden="true"></i>
                          {{/if}}
                          {{#if video}}
                            <i class="fa fa-video-camera video" aria-hidden="true"></i>
                          {{/if}}
                          <a class = "bookmark" id = "c{{session_id}}" >
                            <i class="fa fa-star" aria-hidden="true">
                            </i>
                          </a>
                        </div>
                        <div>
                          {{title}}
                          {{#if slides}}
                            <i class="fa fa-file-powerpoint-o" aria-hidden="true"></i>
                          {{/if}}
                        </div>
                      </h4>
                      <div id="desc-{{session_id}}" class="collapse">
                        {{{description}}}
                        {{#if audio}}
                          <audio controls="" preload="none" id="audio-block">
                            <source src="{{ audio }}">
                          </audio>
                        {{/if}}
                        {{#ifvalue description notequals=""}}
                          <hr class="clear-both">
                        {{/ifvalue}}
                        <div class="session-speakers-list"
                          aria-expanded="false"
                          aria-controls="desc-{{session_id}}">
                          {{#each speakers_list}}
                          <a href="speakers.html#{{nameIdSlug}}">
                              <div class="margin-down-10">
                              {{#if photo}}
                                <img onError="this.onerror=null;this.src='images/avatar.png';" data-original="{{{thumb}}}" class="card-img-top speaker-image-large lazy" width="10" height="10"/>
                              {{else}}
                                <img class="card-img-top speaker-image-large" src="images/avatar.png"/>
                              {{/if}}
                              </div>
                              <span class="margin-down-10">{{name}}</span>
                          </a>
                          {{#if organisation}}
                          <div class="session-speakers-more margin-down-10">
                            {{position}} {{organisation}}
                          </div>
                          {{/if}}
                          <div class="blacktext session-speaker-social margin-down-10">
                            <div class="session-speakers-more">
                              {{#if website}}
                              <a class="blacktext social speaker-social" href="{{{website}}}"}>
                                <i class="fa fa-home"></i> Web
                              </a>&nbsp;
                              {{/if}}
                              {{#if github}}
                              <a class="blacktext social speaker-social" href="{{{github}}}"}>
                                <i class="fa fa-github"></i> Github
                              </a>&nbsp;
                              {{/if}}
                              {{#if twitter}}
                              <a class="blacktext social speaker-social" href="{{{twitter}}}"}>
                                <i class="fa fa-twitter"></i> Twitter
                              </a>&nbsp;
                              {{/if}}
                              {{#if linkedin}}
                              <a class="blacktext social speaker-social" href="{{{linkedin}}}"}>
                                <i class="fa fa-linkedin"></i> LinkedIn
                              </a>&nbsp;
                              {{/if}}
                            </div>
                          </div>
                          {{#if biography}}
                            <div class="session-speakers-more margin-down-10">
                              {{{biography}}}
                            </div>
                          {{/if}}
                          <div class="blacktext session-speaker-social">
                            <div class="session-speakers-more">
                              <a class="session-lin social speaker-social clickable-link">
                                <i class="fa fa-share"></i> Share
                              </a>&nbsp;
                              <div class="social-buttons row">
                               {{> social}}
                               <div class="row social-link">
                                 <input class="speakers-inputbox" type="text" onclick="this.select()" value="base#s-{{../session_id}}" readonly>
                               </div>
                              </div>
                            </div>
                          </div>
                          <hr class="clear-both">
                          {{/each}}
                          <div class="blacktext">
                            <p><i id="location" class="room-name">{{location}}</i></p>
                            <p>{{sessiondate}}, <span>{{start}} - {{end}}</span></p>
                            <p>
                              <ul class="title-inline">
                                <li style="background-color:{{{color}}}; color: {{{font_color}}};" class="titlecolor"></li>&nbsp;
                                <li class="blacktext track-name">{{tracktitle}}</li>
                              </ul>
                            </p><br>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                {{/sessions}}
              </div>
            </div>
            </div>
            {{/times}}
          </div>
          {{/timeList}}
        </div>
      </div>
      <div class="col-md-12 calendar-view hide">
        <div id="track-list" class="container">
        {{#roomsinfo}}
            <div class="{{slug}} calendar">
              <div class="col-md-12 paddingzero">
                <a class="anchor" id="{{slug}}"></a>
                <h5 class="text">{{date}}</h5>
              </div>
              <div class="calendar-content">
                <div class="times">
                  <div class="time" style="height: {{{timeToPixel}}}px">
                    &nbsp;
                  </div>
                  {{#timeline}}
                  <div class="time" style="height: {{{../timeToPixel}}}px; line-height: {{{../timeToPixel}}}px">
                    {{time}}
                  </div>
                  {{/timeline}}
                </div>
                <div class="rooms" style="height: {{{height}}}px;background-image: url('images/timeline.png');background-repeat: repeat;">
                  {{#venue}}
                  <div class="room" style="width: {{{../width}}};">
                    <div class="room-header" style="height: {{{../timeToPixel}}}px;">
                      {{#if venue }}
                        <span>{{venue}}</span>
                      {{/if}}
                    </div>
                    <div>
                      {{#sessions}}
                        <div class="session" style="top:{{{top}}}px; height:{{{height}}}px;background-color:{{{color}}};
                          color: {{{font_color}}};">
                        <div class="session-name">{{title}}</div>
                        <div class="pop-box hide">
                          <div class="arrow">
                            <span></span>
                          </div>
                          <div class="pop-container" id="pop-speaker-name">
                            <div class="pop">
                              <div class="pop-header">
                                <span class="s-popup-header-name"><strong>{{{title}}} ({{start}} - {{end}})</strong>
                                </span>
                              </div>
                              <div class="pop-over row">
                                <hr>
                                <h4 class="text"><strong>About the session</strong></h4>
                                {{{description}}}
                              </div>
                              <div class="pop-speakers">
                               <div class="pop-over row">
                                 <hr>
                                 <h4 class="text"><strong>Speakers</strong></h4>
                                 <div class="session-speakers-list" style="height: {{{height}}}px;">
                                 {{#speakers_list}}
                                   <a href="speakers.html#{{nameIdSlug}}">
                                     <div class="session-speakers-less">
                                       <p class="session-speakers">
                                       {{#if photo}}
                                         <img onError="this.onerror=null;this.src='images/avatar.png';" data-original="{{thumb}}" class="lazy card-img-top speaker-image-large"/>
                                       {{else}}
                                         <img class="card-img-top speaker-image-large" src="images/avatar.png"/>
                                       {{/if}}
                                       </p>
                                       <span class="graytext">{{name}}</span>
                                     </div>
                                   </a>
                                   {{#if organisation}}
                                     <p class="session-speakers-more">
                                       {{position}} {{organisation}}
                                     </p>
                                   {{/if}}
                                   {{#if biography}}
                                     <div class="session-speakers-more">
                                       {{{biography}}}
                                     </div>
                                   {{/if}}
                                   <div class="blacktext session-speaker-social">
                                     <div class="session-speakers-more">
                                       {{#if website}}
                                       <a class="blacktext social speaker-social" href="{{{website}}}"}>
                                         <i class="fa fa-home"></i> Web
                                       </a>&nbsp;
                                       {{/if}}
                                       {{#if github}}
                                       <a class="blacktext social speaker-social" href="{{{github}}}"}>
                                         <i class="fa fa-github"></i> Github
                                       </a>&nbsp;
                                       {{/if}}
                                       {{#if twitter}}
                                       <a class="blacktext social speaker-social" href="{{{twitter}}}"}>
                                         <i class="fa fa-twitter"></i> Twitter
                                       </a>&nbsp;
                                       {{/if}}
                                       {{#if linkedin}}
                                       <a class="blacktext social speaker-social" href="{{{linkedin}}}"}>
                                         <i class="fa fa-linkedin"></i> LinkedIn
                                       </a>&nbsp;
                                       {{/if}}
                                       <a class="session-lin blacktext social speaker-social clickable-link">
                                         <i class="fa fa-share"></i> Share
                                       </a>
                                       <div class="social-buttons row">
                                        {{> social}}
                                        <div class="row social-link">
                                          <input class="speakers-inputbox" type="text" onclick="this.select()" value="base#venue-{{../session_id}}" readonly>
                                        </div>
                                       </div>
                                     </div>
                                   </div>
                                   <hr class="clear-both">
                                   {{/speakers_list}}
                                   <div class="blacktext">
                                     {{#if roomname}}
                                     <p><i>{{roomname}}</i></p>
                                     {{/if}}
                                     {{#if sessiondate}}
                                     <p>{{sessiondate}}, <span>{{start}} - {{end}}</span></p>
                                     {{/if}}
                                     <p>
                                       <ul class="title-inline">
                                         <li style="background-color:{{{color}}}; color: {{{font_color}}};"
                                           class="titlecolor"></li>&nbsp;
                                         <li class="blacktext">{{tracktitle}}</li>
                                       </ul>
                                     </p><br>
                                   </div>
                                 </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      {{/sessions}}
                    </div>
                  </div>
                  {{/venue}}
                  <div class="calendar-footer"></div>
                </div>
              </div>
            </div>
          {{/roomsinfo}}
        </div>
      </div>
        <div class="track-room-names col-md-3 col-sm-3">
          <div class="row">
            <div class="col-md-12 col-sm-12 room-name-list">
              <h4 class='list-title'> Rooms List </h4>
                {{#each roomsnames}}
                  <div class="room-info">
                    <span style="background-color: #777;" class="titlecolor"></span>
                    <span class="room-name">{{this}}</span>
                  </div>
                  {{/each}}
            </div>
            <div class="col-md-12 col-sm-12">
              <h4 class='list-title'> Tracks List </h4>
                {{#tracknames}}
                {{#if title}}
                <div class="track-info">
                  <span style="background-color: {{color}};" class="titlecolor"></span>
                  <span class="track-name">{{title}}</span>
                </div>
                {{/if}}
                {{/tracknames}}
            </div>
          </div>
        </div>
      </div>
  </div>
</div>

  {{> footer}}
  <script src="./js/jquery.min.js"></script>
  <script src="./js/bootstrap.min.js" type="text/javascript"></script>
  <script src="./js/schedule.min.js" type="text/javascript"></script>
  <script type="text/javascript">

    $(document).ready(function() {
      var eventName = "{{eventurls.name}}";
      var mode = 0;
      var flag = 0;
      var isAdded = 0;
      var trackFilterMode=0;
      var roomFilterMode=0;
      var isCalendarView = false;
      let url = window.location.href.split('#')[0];
      var $timeline;
      var numberOfChildElements;
      var widthOfChild;
      var canvasWidth;
      var initialWidth;
      var roomName;
      var trackName;

      $(function() {
        $("img.lazy").lazyload({
          threshold: 2000
        });
      });

        window.onload = function () {
          window.addEventListener("hashchange", function(){
            let curUrl = window.location.href;
            let trackNumber = curUrl.split('#')[1];
            if(trackNumber !== '' && /^\d+$/.test(trackNumber.substring(0,4))) {
              let offset = 20;
              $('html, body').animate({
                scrollTop: $("#" + trackNumber).offset().top - $(".navbar-fixed-top").height() - offset
              }, 0);
              $('#title-' + trackNumber).click();
            }
          }, false);

          if(window.location.href.split('#')[1] !== '' && /^\d+$/.test(window.location.href.split('#')[1].substring(0,4))) {
            $('#title-' + window.location.href.split('#')[1]).click();
          }

          if(window.location.href.indexOf('#')!== -1 && window.location.href.split('#')[1] !== '' && !(/^\d+$/.test(window.location.href.split('#')[1].substring(0,4)))) {
            var filterVal;
            trackName =  decodeURIComponent(window.location.href.toString().split('#')[1]);
            trackFilterMode = 1;
            roomFilterMode = 0;
            var local_storage_events=JSON.parse(localStorage[eventName]);
            var isRoom = true;

            var sidebarDiv = $('.side-collapse');
              if (!sidebarDiv.hasClass('in'))
                sidebarDiv.addClass('in');

              $('.fossasia-filter').each(function() {
                if($(this).is(':visible')) {
                  filterVal = $(this).val();
                }
              });

              $('.track-filter-info').show();
              $('#TrackCurFilter').text(trackName);
              $('.room-filter-info').hide();

              $('.day-filter').each(function () {
                var isDay = false;
                $(this).find('.time-filter').each(function () {
                  var isTime = false;
                  $(this).find('.schedule-track').each(function () {
                    if ($(this).find('.tip-description').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                      $(this).find('.session-speakers-list a p span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                      $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                      $(this).find('.event').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                      $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
                        var name=$(this).find('.title-inline .blacktext').text();
                        var id=$(this).attr('id');
                        if((mode && local_storage_events[id] !== 1) || (name !== trackName))
                        {
                          $(this).hide();
                        } else {
                          $(this).show();
                          isTime = true;
                        }
                    } else {
                      $(this).hide();
                    }
                  });
                  if(isTime === false) {
                    $(this).hide();
                  } else {
                    $(this).show();
                      isDay = true;
                  }
                });
                if(isDay === false) {
                  $(this).hide();
                } else {
                  isRoom = false;
                  $(this).show();
                }
              });
              $('html, body').animate({scrollTop: 0}, 500);

              if(isRoom === true) {
                roomName = decodeURIComponent(window.location.href.toString().split('#')[1]);
                roomFilterMode = 1;
                trackFilterMode = 0;

                $('.room-filter-info').show();
                $('#RoomCurFilter').text(roomName);
                $('.track-filter-info').hide();

                $('.day-filter').each(function () {
                  var isDay = false;
                  $(this).find('.time-filter').each(function () {
                    var isTime = false;
                    $(this).find('.schedule-track').each(function () {
                      if ($(this).find('.tip-description').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                        $(this).find('.session-speakers-list a p span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                        $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                        $(this).find('.event').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                        $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
                        var name = $(this).find('#location').text();
                        var id = $(this).attr('id');
                        if ((mode && local_storage_events[id] !== 1) || (name !== roomName)) {
                          $(this).hide();
                        }else {
                          $(this).show();
                          isTime = true;
                        }
                      } else {
                        $(this).hide();
                      }
                    });

                    if (isTime === false) {
                      $(this).hide();
                    } else {
                      $(this).show();
                      isDay = true;
                    }
                  });

                  if (isDay === false) {
                    $(this).hide();
                  } else {
                    $(this).show();
                  }
                });
                $('html, body').animate({scrollTop: 0}, 500);
              }
          }
      };

      var cal = ics();

      function exportICS() {
        var scheduleArr = {{{json timeList}}};

        function removeDashFromDate(date) {
          return date.replace(/-/g, '');
        }
        function removeColonFromTime(time) {
          return time.replace(/:/g, '');
        }

        function uuidv4() {
          return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>
            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
          )
        }

        scheduleArr.forEach(function(scheduleDay) {
          var date = removeDashFromDate(scheduleDay.slug);

          scheduleDay.times.forEach(function(time) {
            time.sessions.forEach(function(session) {
              var sessObj = {};

              sessObj.begin = date + 'T' + removeColonFromTime(session.start) + '00';
              sessObj.stop = date + 'T' + removeColonFromTime(session.end) + '00';
              sessObj.subject = session.title;
              sessObj.description = session.description;
              sessObj.location = session.location;
              sessObj.uid = uuidv4();

              cal.addEvent(sessObj);
            });
          });
        });

        cal.download(eventName, '.ics', false);
       }

      $('.export-schedule').click(function() {
        exportICS();
      });

      $('.session-lin').click(function() {
        $(this).parent().parent().find("div.social-buttons").toggle();
        var val = $(this).parent().parent().find('.speakers-inputbox').val();
        $(this).parent().parent().find('.speakers-inputbox').val(window.location.href.split('#')[0] + '#'  + val.split('#').pop());
      });

      $('#TrackClearFilter').click(function() {
        trackFilterMode = 0;
        display();
        $('.track-filter-info').hide();
      });

      $('.track-name').click(function() {
        var filterVal;
        trackName = $(this).text();
        trackFilterMode = 1;
        roomFilterMode = 0;
        var local_storage_events = JSON.parse(localStorage[eventName]);
        var visibleRooms = 0;

        var sidebarDiv = $('.side-collapse');
        window.location.href = url + '#' + trackName;
        if (!sidebarDiv.hasClass('in'))
          sidebarDiv.addClass('in');

        $('.fossasia-filter').each(function() {
          if($(this).is(':visible')) {
            filterVal = $(this).val();
          }
        });

        $('.track-filter-info').show();
        $('#TrackCurFilter').text(trackName);
        $('.room-filter-info').hide();

        $('.day-filter').each(function () {
          var temp = 0;
          $(this).find('.time-filter').each(function () {
            var flag = 0;
            $(this).find('.schedule-track').each(function () {
            if ($(this).find('.tip-description').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
              $(this).find('.session-speakers-list a p span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
              $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
              $(this).find('.event').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
              $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
              var name = $(this).find('.title-inline .blacktext').text();
              var id = $(this).attr('id');
              if (mode && local_storage_events[id] != 1)
              {
                $(this).hide();
              } else if (name != trackName) {
                $(this).hide();
              } else {
                $(this).show();
                flag = 1;
              }
            } else {
              $(this).hide();
            }
            });
            if(flag === 0) {
              $(this).hide();
            } else {
              $(this).show();
              temp = 1;
            }
          });
          if(temp == 0) {
            $(this).hide();
          } else {
            $(this).show();
          }
        });

        $('.calendar').each(function() {
          visibleRooms = 0;
          $(this).find('.room').each(function() {
            flag = 1;
            $(this).find('.session').each(function() {
              if ($(this).find('.session-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-list a span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
                var name = $(this).find('.title-inline .blacktext').text();
                if (name != trackName) {
                  $(this).hide();
                } else {
                  $(this).show();
                  flag = 0;
                }
              } else {
                $(this).hide();
              }
            });
            if (flag == 1) {
              $(this).hide();
            } else {
              $(this).show();
              visibleRooms++;
            }
          });

          if (visibleRooms <= 6) {
            let width = 100 / visibleRooms;
            $(this).find('.room').css("width", width + '%');
          } else {
            $(this).find('.room').css("width", "160px");
          }
        });

        noResult();
        $('html, body').animate({scrollTop: 0}, 500);
      });

      $('#RoomClearFilter').click(function() {
        roomFilterMode = 0;
        display();
        $('.room-filter-info').hide();
      });

      $('.room-name').click(function () {
        var filterVal;
        roomName = $(this).text();
        roomFilterMode = 1;
        trackFilterMode = 0;
        var local_storage_events = JSON.parse(localStorage[eventName]);

        var sidebarDiv = $('.side-collapse');
        window.location.href = url + '#' + roomName;
        if (!sidebarDiv.hasClass('in'))
           sidebarDiv.addClass('in');

        $('.fossasia-filter').each(function () {
          if ($(this).is(':visible')) {
            filterVal = $(this).val();
          }
        });

        $('.room-filter-info').show();
        $('#RoomCurFilter').text(roomName);
        $('.track-filter-info').hide();

        $('.day-filter').each(function () {
          var temp = 0;
          $(this).find('.time-filter').each(function () {
          var flag = 0;
            $(this).find('.schedule-track').each(function () {
              if ($(this).find('.tip-description').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-list a p span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.event').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
                var name = $(this).find('#location').text();
                var id=$(this).attr('id');
                if(mode && local_storage_events[id]!=1) {
                      $(this).hide();
                } else if (name != roomName) {
                  $(this).hide();
                } else {
                   $(this).show();
                   flag = 1;
                }
            } else {
               $(this).hide();
            }
            });
            if (flag === 0) {
              $(this).hide();
            } else {
               $(this).show();
               temp = 1;
            }
          });
          if (temp == 0) {
            $(this).hide();
          } else {
             $(this).show();
          }
        });

        $('.calendar').each(function() {
          $(this).find('.room').each(function() {
            flag = 1;
            if ($(this).find('.room-header').find('span').text() == roomName) {
              $(this).find('.session').each(function() {
                if ($(this).find('.session-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                  $(this).find('.session-speakers-list a span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                  $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                  $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
                  flag = 0;
                } else {
                  $(this).hide();
                }
              });
            }
            if (flag == 1) {
              $(this).hide();
            } else {
              $(this).show();
              $(this).css("width", "100%");
            }
          });
        });

        noResult();
        $('html, body').animate({scrollTop: 0}, 500);
      });

      $('.fossasia-filter').change(function() {

        var filterVal = $(this).val();
        var local_storage_events = JSON.parse(localStorage[eventName]);
        var visibleRooms = 0;

        $('.day-filter').each(function() {
          var temp = 1;
          $(this).find('.time-filter').each(function() {
            var flag = 1;
            $(this).find('.schedule-track').each(function() {
              var id=$(this).attr('id');
              if ($(this).find('.tip-description').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-list a span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.event').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
                var trackVal = $(this).find('.title-inline .blacktext').text();
                var roomVal = $(this).find('#location').text();
                if (mode && local_storage_events[id] != 1) {
                  $(this).hide();
                } else if (trackFilterMode && trackVal != trackName) {
                  $(this).hide();
                } else if (roomFilterMode && roomVal != roomName) {
                  $(this).hide();
                } else {
                  flag = 0;
                  $(this).show();
                }
              } else {
                $(this).hide();
              }
            });
            if (flag == 1) {
              $(this).hide();
            } else {
              temp = 0;
              $(this).show();
            }
          });
          if (temp == 1) {
            $(this).hide();
          } else {
           $(this).show();
          }
        });

        $('.calendar').each(function() {
          visibleRooms = 0;
          $(this).find('.room').each(function() {
            flag = 1;
            $(this).find('.session').each(function() {
              if ($(this).find('.session-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-list a span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
                var trackVal = $(this).find('.title-inline .blacktext').text();
                var roomVal = $(this).find('.blacktext i').text();
                if (trackFilterMode && trackVal != trackName) {
                  $(this).hide();
                } else if (roomFilterMode && roomVal != roomName) {
                  $(this).hide();
                } else {
                  $(this).show();
                  flag = 0;
                }
              } else {
                $(this).hide();
              }
            });
            if (flag == 1) {
              $(this).hide();
            } else {
              $(this).show();
              visibleRooms++;
            }
          });

          if (visibleRooms <= 6) {
            let width = 100 / visibleRooms;
            $(this).find('.room').css("width", width + '%');
          } else {
            $(this).find('.room').css("width", "160px");
          }
        });

        noResult();
      }).keyup(function() {
        $(this).change();
      });

      $('.bookmark').click(function(event){
        var temp = JSON.parse(localStorage[eventName] || '{}');
        var id = ($(this).attr('id').substr(1));
        flag = 1;
        temp[id] = 1;
        if ($(this).hasClass('starred')) {
          $(this).removeClass('starred');
          temp[id] = 0;
          isAdded = 0;
        }
        else {
          $(this).addClass('starred');
          temp[id] = 1;
          isAdded = 1;
        }
        localStorage[eventName] = JSON.stringify(temp);
        event.stopPropagation();
        display();
      });

      $('.schedule-track').click(function(event){
        if(flag) {
          if(mode && !isAdded) {
            $(this).hide();
            isAdded = 0;
          }
          flag = 0;
        }
        else {
          var id = $(this).attr('id');
          var sessionMode = "{{mode}}";
          if(sessionMode == 'single') {
            var curUrl = window.location.href;
            var newUrl = curUrl.substring(0, curUrl.lastIndexOf('/') + 1) + 'sessions/session_' + id + ".html";
            window.location.href = newUrl;
          }
        }
      });
      $('#starred').click(function(event){
          mode = !mode;
          if(!mode) {
              $(this).css("color", "black");
              $('#starred').css("background-color","#fff");
           }
          else {
              $(this).css("color", "white");
              $('#starred').css("background-color","#838282");
          }
          display();
      });

      $('.pop-button').click(function() {
        $(this).parents('.calendar').toggleClass('pop-out');
        $('body').toggleClass('carousel-inner');
        $(this).children().toggleClass('fa-expand');
        $(this).children().toggleClass('fa-compress');
      });

      function getCurrentDate() {
        var className = '';

        $('.date-button').each(function() {
          if($(this).hasClass('is-active')) {
            className = $(this).attr('class').split(' ')[0];
          }
        });
        return className;
      }

      function viewsFilter(curView, date) {
        if(curView === 'list') {
          $('.day-filter').each(function () {
            if($(this).attr('class').split(' ')[0] === date) {
              $(this).removeClass('hide');
            } else {
              $(this).addClass('hide');
            }
          });
        }
        else if(curView === 'calendar') {
          $('.calendar').each(function () {
            if($(this).attr('class').split(' ')[0] === date) {
              $(this).removeClass('hide');
            } else {
              $(this).addClass('hide');
            }
          });
        }
      }

      $('.date-button').click(function() {
        let className = $(this).attr('class').split(' ')[0];

        $(this).addClass('is-active');
        $(this).siblings().removeClass('is-active');

        if(isCalendarView) {
          viewsFilter('calendar', className);
        } else {
          viewsFilter('list', className);
        }
        noResult();
      });

      $('#page-mode').click(function() {
        var curDate = getCurrentDate();

        if (isCalendarView == false) {
          isCalendarView = true;
          $('#page-mode i').addClass('fa-list-alt');
          $('#page-mode i').removeClass('fa-calendar');
          $('.list-view').addClass('hide');
          $('.calendar-view').removeClass('hide');
          if (curDate !== '') {
            viewsFilter('calendar', curDate);
          }
        } else {
          isCalendarView = false;
          $('#page-mode i').removeClass('fa-list-alt');
          $('#page-mode i').addClass('fa-calendar');
          $('.list-view').removeClass('hide');
          $('.calendar-view').addClass('hide');
          if (curDate !== '') {
            viewsFilter('list', curDate);
          }
        }
      });

      $(".export-png").click(function() {
        let fullScheduler = true;
        if (isCalendarView === true) {
          $('.calendar').each(function() {
            if ($(this).attr('class').split(' ').indexOf('hide') <= 0) {
              $timeline = $(this);
              initialWidth = $timeline.width();
              numberOfChildElements = $timeline.find('.rooms')[0].childElementCount;
              numberOfChildElements = numberOfChildElements - 1;
              widthOfChild = $timeline.find('.room').width();
              canvasWidth = numberOfChildElements * widthOfChild + 50;
              $timeline.width(canvasWidth);
            }
          });
        } else {
          $('.day-filter').each(function() {
            $('.day-filter').each(function() {
              let hidePresent = $(this).attr('class').split(' ').indexOf('hide') <= 0;
              fullScheduler = hidePresent && fullScheduler;
              if (hidePresent) {
                $timeline = $(this);
              }
            });
            if(fullScheduler) {
              $timeline = $('.day-filter').parent();
            }
          });
        }
        html2canvas($timeline, {
          onrendered: function(canvas) {
            canvas.id = "generated-canvas";
            canvas.toBlob(function(blob) {
              if(fullScheduler) {
                saveAs(blob, '' + $timeline.attr('id') + '.png');
              }
              else{
                saveAs(blob, '' + $timeline.attr('class') + '.png');
              }
            });
          },
        });
        $timeline.width(initialWidth);
      });


      $('.export-pdf').click(function () {
          let pdf = new jsPDF('l', 'pt', 'a4');
          let options = {
            pagesplit: true
          };
          if (isCalendarView === true) {
              let fullScheduler = true;

              $('.calendar').each(function() {
                  let hidePresent = $(this).attr('class').split(' ').indexOf('hide') <= 0;
                  fullScheduler = hidePresent && fullScheduler;
                  if (hidePresent) {
                    $timeline = $(this);
                  }
              });
              if(fullScheduler) {
                  $timeline = $('.calendar').parent();
              }
          } else {
              let fullScheduler = true;
              $('.day-filter').each(function() {
                  let hidePresent = $(this).attr('class').split(' ').indexOf('hide') <= 0;
                  fullScheduler = hidePresent && fullScheduler;
                  if (hidePresent) {
                    $timeline = $(this);
                  }
              });
              if(fullScheduler) {
                  $timeline = $('.day-filter').parent();
              }
          }

          let scheduleDate = $timeline.attr('class').match(/(\d{4}-\d{2}-\d{2})/g);
          if (scheduleDate) {
              scheduleDate=scheduleDate[0];
          } else {
              scheduleDate ="Schedule";
          }
          pdf.addHTML($timeline, 0, 0, options, function(){
              pdf.save(scheduleDate + ".pdf");
          });
      });

      function noResult() {
        var listFilterLength = $('.day-filter:visible').length;
        var calendarFilterLength = $('.room:visible').length;
        if((isCalendarView && calendarFilterLength == 0) || (!isCalendarView && listFilterLength == 0)) {
          $('#no-results').remove();
          $('.date-list').after("<p style = 'padding-left: 15px; margin-top: 15px; font-weight: bold; color: red' id='no-results'>No matching results found.</p>");
        } else {
          $('#no-results').remove();
        }
      }

      function display() {
        var temp = JSON.parse(localStorage[eventName]);
        var filterVal;
        var visibleRooms = 0;
        $('.fossasia-filter').each(function () {
          if ($(this).is(':visible')) {
            filterVal = $(this).val();
          }
        });

        $('.day-filter').each(function() {
          var dayFlag = 0;
          $(this).find('.time-filter').each(function() {
            var timeFlag = 0;
            $(this).find('.schedule-track').each(function() {
              var filter = 1;
              if (trackFilterMode) {
                var trackVal = $(this).find('.title-inline .blacktext').text();
                if (trackVal != trackName) {
                  filter = 0;
                }
              } else if (roomFilterMode) {
                var roomVal = $(this).find('#location').text();
                if(roomVal != roomName){
                  filter = 0;
                }
              }
              var elemId = $(this).attr('id');
              var elemFlag = 0;
              if ($(this).find('.tip-description').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-list a p span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.event').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
                if (temp[elemId] == 1 && filter) {
                  elemFlag = 1;
                  $(this).find('.bookmark').each(function() {
                    $(this).addClass('starred');
                  });
                  } else if (!mode && filter) {
                  elemFlag = 1;
                }
              }
              if (elemFlag) {
                timeFlag = 1;
                $(this).show();
              }
              else {
                $(this).hide();
              }
            });

            if (timeFlag) {
              dayFlag = 1;
              $(this).show();
            }
            else {
              $(this).hide();
            }
          });

          if (dayFlag) {
            $(this).show();
          }
          else {
            $(this).hide();
          }
        });

        $('.calendar').each(function() {
          visibleRooms = 0;
          $(this).find('.room').each(function() {
            var roomFlag = 1;
            $(this).find('.session').each(function() {
              if ($(this).find('.session-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-list a span').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.session-speakers-more').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0 ||
                $(this).find('.speaker-name').text().toUpperCase().indexOf(filterVal.toUpperCase()) >= 0) {
                $(this).show();
                roomFlag = 0;
              } else {
                $(this).hide();
              }
            });
            if (roomFlag == 1)  {
              $(this).hide();
            } else {
              $(this).show();
              visibleRooms++;
            }
          });
          if (visibleRooms <= 6) {
            let width = 100 / visibleRooms;
            $(this).find('.room').css("width", width + '%');
          }
          else {
            $(this).find('.room').css("width", "160px");
          }
        });

        noResult();
      }

      function initPage() {
        if(localStorage.hasOwnProperty(eventName) === false) {
          localStorage[eventName] = '{}';
        }

        var temp = JSON.parse(localStorage[eventName]);
        var elemId;
        Object.keys(temp).forEach(function(key) {
          if (temp[key] == 1) {
            elemId = $('#' + key).find('.bookmark').addClass('starred');
          }
        })
      }
      initPage();
    });

    function loadVideoAndSlides(div, videoURL, slideURL){
      if(videoURL !== null && videoURL !== '') {
        let isVideoDisplayed = $('#desc-' + div).hasClass('in');
        if (!isVideoDisplayed) {
          $('#desc-' + div).children('div').prepend('<iframe id = "video-' + div + '" class = "video-iframe col-xs-12 col-sm-12 col-md-12" src="https://www.youtube.com/embed/' + videoURL + '"></iframe>');
        }
        else {
          $('#video-' + div).remove();
        }
      }
      if(slideURL !== null && slideURL !== '') {
        let isSlideDisplayed = $('#desc-' + div).hasClass('in');
        if (!isSlideDisplayed) {
          if (slideURL.indexOf('pdf') !== -1) {
            $('#desc-' + div).children('div').prepend('<iframe id = "slide-' + div + '" class = "iframe col-xs-12 col-sm-12 col-md-12" frameborder="0" src="https://docs.google.com/gview?url=' + slideURL + '&embedded=true"></iframe>');
          }
          else if (slideURL.indexOf('ppt') !== -1 || slideURL.indexOf('pptx') !== -1){
            $('#desc-' + div).children('div').prepend('<iframe id = "slide-' + div + '" class = "iframe col-xs-12 col-sm-12 col-md-12" frameborder="0" src="https://view.officeapps.live.com/op/embed.aspx?src=' + slideURL + '"></iframe>');
          }
        }
        else {
          $('#slide-' + div).remove();
        }
      }
    }

  </script>
</body>
</html>
